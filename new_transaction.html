<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Minka transaction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>  
</head>
  <body>
    <div class="container text-center">
        <a class="btn btn-light m-2 float-left" href="cop_holder.html" role="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
              </svg>
        </a>
        <h1>COP Holder</h1>
        <h2>Create transaction</h2>
        <div id="respuesta"></div>
        <form>
            <div class="mb-3">
              <label for="account" class="form-label">Account</label>
              <input type="text" placeholder="Enter account number" class="form-control" id="account" aria-describedby="emailHelp">
            </div>
            <div class="mb-3">
                <label for="currency" class="form-label">Currency</label>
                <input type="text" placeholder="Currency" class="form-control" id="currency" aria-describedby="emailHelp">
            </div>
            <div class="mb-3">
                <label for="amount" class="form-label">Amount</label>
                <input type="text" placeholder="Amount" class="form-control" id="amount" aria-describedby="emailHelp">
              </div>
            <button class="btn btn-light m-2">
                Transfer
            </button>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
  <script>
    document.addEventListener("submit", function(e){
        e.preventDefault();
        $("#respuesta").html("enviando..");
        var data={
            "hash": "4969e3c012b66d88cec597bf337fc01eab8d651e6ed2d5c40236cc1f7d93435a",
            "meta": {
                "proofs": [
                {
                    "method": "ed25519-v2",
                    "public": "WAweF9PHlboQoW0z8NqhZXFmzUTaV74NRFAd/aILprE=",
                    "digest": "4969e3c012b66d88cec597bf337fc01eab8d651e6ed2d5c40236cc1f7d93435a",
                    "result": "0G2gvSfBx6MwPT8ShBaiYx7zwa5Kqc4Cq3S3NXV1m5/ZPozoH/SUouuhi9sQU+f0yo0eX4ygH7PzE3PAdlxsCQ==",
                    "custom": {
                    "moment": "2019-01-01T00:00:00.000Z",
                    "type": "PERSON",
                    "reference": 3284759238475
                    }
                }
                ],
                "thread": "bog",
                "status": "aborted",
                "routed": true
            },
            "data": {
                "handle": "bog",
                "parent": "4969e3c012b66d88cec597bf337fc01eab8d651e6ed2d5c40236cc1f7d93435a",
                "access": [
                {
                    "signer": {
                    "format": "ed25519-raw",
                    "public": "WAweF9PHlboQoW0z8NqhZXFmzUTaV74NRFAd/aILprE=",
                    "custom": {
                        "type": "person"
                    }
                    },
                    "invoke": "wallet.canSpendAllChangedRouteTargets",
                    "filter": {
                    "schema": "bank"
                    },
                    "change": {
                    "schema": "p2p"
                    },
                    "action": "any",
                    "bearer": {
                    "iss": "company.org",
                    "sub": "admin",
                    "aud": "ledger",
                    "hsh": true,
                    "$signer": {
                        "format": "ed25519-raw",
                        "public": "WAweF9PHlboQoW0z8NqhZXFmzUTaV74NRFAd/aILprE=",
                        "custom": {
                        "type": "person"
                        }
                    }
                    },
                    "record": "any"
                }
                ],
                "custom": {
                "type": "PERSON",
                "reference": 3284759238475
                },
                "schema": "bog",
                "claims": [
                {
                    "action": "issue",
                    "target": {
                    "handle": "account:12345@pbz.hr",
                    "custom": {
                        "type": "PERSON",
                        "reference": 3284759238475
                    }
                    },
                    "symbol": {
                    "handle": "bog",
                    "custom": {
                        "type": "PERSON",
                        "reference": 3284759238475
                    }
                    },
                    "amount": document.getElementById("amount").value
                }
                ],
                "config": {
                "commit": "auto"
                },
                "origin": "bog"
            }
        };
        $.ajax({
            // url:"https://tpm-luis.ldg-stg.one/api/v2/intents",
            url:"http://echo.jsontest.com/insert-key-here/insert-value-here/key/value",
            type:"GET",
            dataType:"json",
            data:data,
            success:function(result){
                $("#respuesta").html("success");//result.key);
                $("#respuesta").addClass("bg-success");
            },
            error: function (jqXhr, textStatus, errorMessage) {
				// $("#respuesta").html(jqXhr.responseJSON.errorMessage);
                $("#respuesta").html("error");
                $("#respuesta").addClass("bg-danger");
			},
        })
    })
  </script>
</html>